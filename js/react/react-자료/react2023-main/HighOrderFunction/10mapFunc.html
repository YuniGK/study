<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- 
    map()함수
        - 콜백함수를 실행한 결과를 통해 새로운 배열을 만들때 사용한다.
        - 즉, forEach()와는 다르게 반환값이 존재한다. 
        - forEach()와 동일하게 N번 반복하고, thisArgs의 사용법도 동일하다. 
        - 호출한 배열이 N이라면 N개의 원소 전체가 반환된다. 

        형식]
            var oldArray = [1,2,3,.....N]
            var newArray = oldArray.map(
                callBackFunction(현재값, 현재값의인덱스, 호출한배열){
                    실행부;
                    return 반환값;
                }, 
                thisArgs
            );            
-->
<script type="text/javascript">
    function mapTest1(){
        console.error("mapTest1() called..기본사용법");    
        //기존 배열의 각 요소에 *2를 한 새로운 배열을 생성한다. 
        var oldArray = [1,2,3,4,5];
        var newArray = oldArray.map(
            function(currentVal, index, array){
                console.log(currentVal, index, array);
                return currentVal*2;
            }
        );
        console.log(newArray);
    }

    /*
    객체형 JSON배열의 각 요소를 이용해서, 요소의 name을 key로 사용하는 
    새로운 JSON객체를 생성한다.
    */
   function mapTest2(){
        console.error("mapTest2() called..JSON객체 배열 활용하기");    
        var oldJSON = [
                        {name : "이건", salary : 50000000},
                        {name : "홍길동", salary : 1000000},
                        {name : "임신구", salary : 3000000},
                        {name : "이승룡", salary : 2000000}
                    ];
    
        //콜백함수를 4번 반복 호출하여, 반환된 값을 newJson에 배열로 저장한다.
        var newJson = oldJSON.map(function(currentVal){
            //빈 객체를 하나 생성한다. 
            var returnObj = {}
            //name을 key로 salary를 value로 지정하여 객체를 완성한다. 
            returnObj[currentVal.name] = currentVal.salary;
            //완성된 객체를 반환한다. 
            return returnObj;
        });
        console.log(newJson);
    }

    function mapTest3(){        
        console.error("mapTest2() called..화살표 함수 사용하기");    
        var oldArray = [1,2,3,4,5];
        //각 원소의 제곱을 반환하여 새로운 배열을 만든다. 매개변수 중 첫번째만 사용했다.
        var newArray = oldArray.map((num) => {            
            return Math.pow(num, 2);
        });
        console.log(newArray);
    }
</script>
<body>
    <h2>고차함수 - map()</h2>
    <div>
        <input type="button" onclick="mapTest1();" value="map1">
        <input type="button" onclick="mapTest2();" value="map2">
        <input type="button" onclick="mapTest3();" value="map3">
    </div>
</body>
</html>